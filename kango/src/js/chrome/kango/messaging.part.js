function MessageRouter(){MessageRouterBase.call(this),chrome.runtime.onMessage.addListener(func.bind(this._onMessage,this))}var core=require("kango/core"),utils=require("kango/utils"),func=utils.func,object=utils.object,BrowserTab=require("kango/browser").BrowserTab;MessageRouter.prototype=object.extend(MessageRouterBase,{_onMessage:function(e,r){var s={name:e.name,data:e.data,origin:e.origin,target:null,source:null};if("tab"==e.origin){var t=r.tab;"undefined"==typeof t&&(t={id:-1,url:"",title:"Hidden Tab"}),s.source=s.target=new BrowserTab(t)}this.fireMessageEvent("message",s)}}),module.exports=new MessageRouter;