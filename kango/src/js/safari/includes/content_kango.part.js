function initMessaging(){var e=[];safari.self.addEventListener("message",function(a){for(var n={name:a.name,data:a.message,origin:"background",source:kango,target:kango},s=0;s<e.length;s++)e[s](n)}),kango.dispatchMessage=function(e,a){return safari.self.tab.dispatchMessage(e,a),!0},kango.addEventListener=function(a,n){if("message"==a){for(var s=0;s<e.length;s++)if(e[s]==n)return;e.push(n)}}}kango.browser={getName:function(){return"safari"}},kango.io={getResourceUrl:function(e){return safari.extension.baseURI+e}};