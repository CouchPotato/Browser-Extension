function MessageRouter(){MessageRouterBase.call(this),safari.application.addEventListener("message",func.bind(this._onMessage,this),!1)}var core=require("kango/core"),utils=require("kango/utils"),func=utils.func,object=utils.object,browser=require("kango/browser");MessageRouter.prototype=object.extend(MessageRouterBase,{_onMessage:function(e){if(e.target instanceof SafariBrowserTab){var s={name:e.name,data:e.message,origin:"tab",target:browser.getKangoTab(e.target),source:{dispatchMessage:function(s,a){return e.target.page.dispatchMessage(s,a),!0}}};this.fireMessageEvent("message",s)}}}),module.exports=new MessageRouter;